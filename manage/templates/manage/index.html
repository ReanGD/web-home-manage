{% extends "manage/_base.html" %}
{% load staticfiles %}
{% block title %}Media manage{% endblock %}
{% block body %}
<div class="container">
  <div class="navbar navbar-default navbar-static-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <a class="navbar-brand" href="#" id="index">Manage:</a>
      </div>
      <div class="navbar-collapse collapse">
        <ul id="mainmenu" class="nav navbar-nav navbar-left">
          {% for it in items %}
          <li><a url="{% url 'manage:torrent_list' it.id %}", href="#">{{ it.local_ptr.name }}</a></li>
          {% endfor %}  
          <li><a url="{% url 'manage:local_storage_list' %}", href="#">Local storage</a></li>
          <li><a url="{% url 'manage:remote_storage_list' %}", href="#">Remote storage</a></li>
          <li><a url="{% url 'manage:storage_map_list' %}", href="#">Storage map</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="jumbotron" id="view">
  </div>
</div>
{% endblock %}
{% block script %}
<script type="text/javascript" src="{% static 'django_ajax/jquery.ajax.min.js' %}"></script>
<script type="text/javascript">
  function refresh(e, self)
  {
    if (self == undefined)
      self = $(this);
    if (e.preventDefault != undefined)
      e.preventDefault();
    self.tab('show');
    ajaxGet(self.attr('url'), function(content){
        $("#view").html(content);
    });
  }

  function to_index(e)
  {
    refresh(e, $('#mainmenu>li>a:first'))
  }

  $('#mainmenu>li>a').click(refresh);
  $('#index').click(to_index);
  $(document).ready(to_index);
</script>
{% endblock %}