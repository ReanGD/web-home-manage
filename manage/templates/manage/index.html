{% extends "manage/_base.html" %}
{% load staticfiles %}
{% block title %}Media manage{% endblock %}
{% block body %}
<div class="container">
  <div class="navbar navbar-default navbar-static-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <a class="navbar-brand" href="#" id="index">Manage:</a>
      </div>
      <div class="navbar-collapse collapse">
        <ul id="mainmenu" class="nav navbar-nav navbar-left">
          <li>
            <a id="tabFilms" url="./get/films/", href="#">Films</a>
          </li>
          <li>
            <a id="tabAudioBook" url="./get/audiobooks/", href="#">Audiobook</a>
          </li>
          <li>
            <a id="tabLocalStorage" url="{% url 'manage:local_storage_list' %}", href="#">Local storage</a>
          </li>
          <li>
            <a id="tabRemoteStorage" url="{% url 'manage:remote_storage_list' %}", href="#">Remote storage</a>
          </li>
          <li>
            <a id="tabStorageMap" url="{% url 'manage:storage_map_list' %}", href="#">Storage map</a>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div class="jumbotron" id="view">
  </div>
</div>
{% endblock %}
{% block script %}
<script type="text/javascript" src="{% static 'django_ajax/jquery.ajax.min.js' %}"></script>
<script type="text/javascript">
  function refresh(e, self)
  {
    if (self == undefined)
      self = $(this);
    if (e.preventDefault != undefined)
      e.preventDefault();
    self.tab('show');
    ajaxGet(self.attr('url'), function(content){
        $("#view").html(content);
    });
  }

  function to_index(e)
  {
    refresh(e, $('#tabFilms'))
  }

  $('#tabFilms').click(refresh);
  $('#tabAudioBook').click(refresh);
  $('#tabLocalStorage').click(refresh);
  $('#tabRemoteStorage').click(refresh);
  $('#tabStorageMap').click(refresh);
  $('#index').click(to_index);
  $(document).ready(to_index);
</script>
{% endblock %}